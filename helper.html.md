# helper


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## View MD in `notebook`

------------------------------------------------------------------------

<a href="https://github.com/tripathysagar/pw/blob/main/pw/helper.py#L25"
target="_blank" style="float:right; font-size:smaller">source</a>

### print_md

>  print_md (s:str)

*Given a string display markdown in Notebook*

## Extract table to dataframe

------------------------------------------------------------------------

<a href="https://github.com/tripathysagar/pw/blob/main/pw/helper.py#L32"
target="_blank" style="float:right; font-size:smaller">source</a>

### table2df

>  table2df (table:playwright.async_api._generated.Locator)

*Given a html table element it extracts the table obj and convert it to
pandas dataframe*

``` python
async with setup_browser(n=1) as obj:
    if obj.is_valid:
        page = obj.pages[0]
        await page.goto("https://en.wikipedia.org/wiki/List_of_largest_companies_by_revenue")
        await page.wait()
        ele = await page.find_ele('//table[@class="wikitable sortable plainrowheaders jquery-tablesorter"]') 
        assert len(ele) != 0

        df = await ele[0].table2df()
        assert len(df) != 0

df.head()
```

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

<table class="dataframe" data-quarto-postprocess="true" data-border="1">
<thead>
<tr style="text-align: right;">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Rank</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">Companies</th>
</tr>
</thead>
<tbody>
<tr>
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>United States of America</td>
<td>22</td>
</tr>
<tr>
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>China</td>
<td>11</td>
</tr>
<tr>
<td data-quarto-table-cell-role="th">2</td>
<td>3</td>
<td>Germany</td>
<td>4</td>
</tr>
<tr>
<td data-quarto-table-cell-role="th">3</td>
<td>4</td>
<td>United Kingdom</td>
<td>2</td>
</tr>
<tr>
<td data-quarto-table-cell-role="th">4</td>
<td>4</td>
<td>Switzerland</td>
<td>2</td>
</tr>
</tbody>
</table>

</div>

## Extract html object to md

------------------------------------------------------------------------

<a href="https://github.com/tripathysagar/pw/blob/main/pw/helper.py#L49"
target="_blank" style="float:right; font-size:smaller">source</a>

### h2md

>  h2md (ele:Union[playwright.async_api._generated.Page,playwright.async_api
>            ._generated.Locator])

*Convert HTML `h` to markdown using \`HTML2Text*

``` python
async with setup_browser(n=1) as obj:
    if obj.is_valid:
        page = obj.pages[0]
        await page.goto("https://example.com/")
        await page.wait()        
        print_md(await page.h2md())
```

# Example Domain

This domain is for use in illustrative examples in documents. You may
use this domain in literature without prior coordination or asking for
permission.

More information…

``` python
async with setup_browser(n=1) as obj:
    if obj.is_valid:
        page = obj.pages[0]
        await page.goto("https://en.wikipedia.org/wiki/List_of_largest_companies_by_revenue")
        await page.wait()
        ele = await page.find_ele('//table[@class="wikitable sortable plainrowheaders jquery-tablesorter"]') 
        print_md(await ele[0].h2md())
```

Breakdown by country Rank | Country | Companies  
1 | United States of America | 22  
2 | China | 11  
3 | Germany | 4  
4 | United Kingdom | 2  
4 | Switzerland | 2  
6 | Japan | 1  
6 | France | 1  
6 | Italy | 1  
6 | India | 1  
6 | Netherlands | 1  
6 | South Korea | 1  
6 | Saudi Arabia | 1  
6 | Singapore | 1  
6 | Taiwan | 1

## Domain helpers

------------------------------------------------------------------------

<a href="https://github.com/tripathysagar/pw/blob/main/pw/helper.py#L60"
target="_blank" style="float:right; font-size:smaller">source</a>

### domain

>  domain (url:str)

*Extract domain i.e. netloc given a url*

``` python
urls = ['https://fast.ai/getting_started.html', 'https://fast.ai/getting_started.html#copyright', 'https://fast.ai/getting_started.html#year=2008-09&quarter=quarter1?a=3']
assert domain("") == ""
assert domain(urls[0]) == 'fast.ai'
```

------------------------------------------------------------------------

<a href="https://github.com/tripathysagar/pw/blob/main/pw/helper.py#L67"
target="_blank" style="float:right; font-size:smaller">source</a>

### is_same_resource

>  is_same_resource (url1:str, url2:str)

*Takes in two urls and check if two url have any wuery param*

``` python
assert is_same_resource(*urls[:-1])
assert not is_same_resource(*urls[1:])
```

------------------------------------------------------------------------

<a href="https://github.com/tripathysagar/pw/blob/main/pw/helper.py#L94"
target="_blank" style="float:right; font-size:smaller">source</a>

### url2fn

>  url2fn (url:str)

\*takes in a url and return a filename by substituting it with \_.\*

``` python
[url2fn(i) for i in urls]
```

    ['fast_ai_getting_started_html',
     'fast_ai_getting_started_html_copyright',
     'fast_ai_getting_started_html_year_2008_09_quarter_quarter1_a_3']
